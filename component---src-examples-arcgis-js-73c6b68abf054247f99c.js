(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{15:function(t,e){},"7ZmC":function(t,e,r){var n=function(t){"use strict";var e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(C){c=function(t,e,r){return t[e]=r}}function u(t,e,r,a){var i=e&&e.prototype instanceof d?e:d,o=Object.create(i.prototype),s=new A(a||[]);return n(o,"_invoke",{value:E(t,r,s)}),o}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(C){return{type:"throw",arg:C}}}t.wrap=u;var f={};function d(){}function p(){}function h(){}var _={};c(_,i,(function(){return this}));var b=Object.getPrototypeOf,y=b&&b(b(T([])));y&&y!==e&&r.call(y,i)&&(_=y);var S=h.prototype=d.prototype=Object.create(_);function v(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function m(t,e){var a;n(this,"_invoke",{value:function(n,i){function o(){return new e((function(a,o){!function n(a,i,o,s){var c=l(t[a],t,i);if("throw"!==c.type){var u=c.arg,f=u.value;return f&&"object"==typeof f&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,o,s)}),(function(t){n("throw",t,o,s)})):e.resolve(f).then((function(t){u.value=t,o(u)}),(function(t){return n("throw",t,o,s)}))}s(c.arg)}(n,i,a,o)}))}return a=a?a.then(o,o):o()}})}function E(t,e,r){var n="suspendedStart";return function(a,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw i;return w()}for(r.method=a,r.arg=i;;){var o=r.delegate;if(o){var s=O(o,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function O(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,O(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var a=l(n,t.iterator,e.arg);if("throw"===a.type)return e.method="throw",e.arg=a.arg,e.delegate=null,f;var i=a.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function g(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function R(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(g,this),this.reset(!0)}function T(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:w}}function w(){return{value:void 0,done:!0}}return p.prototype=h,n(S,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:p,configurable:!0}),p.displayName=c(h,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,s,"GeneratorFunction")),t.prototype=Object.create(S),t},t.awrap=function(t){return{__await:t}},v(m.prototype),c(m.prototype,o,(function(){return this})),t.AsyncIterator=m,t.async=function(e,r,n,a,i){void 0===i&&(i=Promise);var o=new m(u(e,r,n,a),i);return t.isGeneratorFunction(r)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},v(S),c(S,s,"Generator"),c(S,i,(function(){return this})),c(S,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=T,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(R),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return o.type="throw",o.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),R(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;R(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:T(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}(t.exports);try{regeneratorRuntime=n}catch(a){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},YqI2:function(t,e,r){"use strict";(function(t){r.d(e,"a",(function(){return y}));var n=r("vuIU"),a=r("1OyB");new Uint8Array([0]);var i,o,s,c,u,l,f,d,p=[171,75,84,88,32,50,48,187,13,10,26,10];!function(t){t[t.NONE=0]="NONE",t[t.BASISLZ=1]="BASISLZ",t[t.ZSTD=2]="ZSTD",t[t.ZLIB=3]="ZLIB"}(i||(i={})),function(t){t[t.BASICFORMAT=0]="BASICFORMAT"}(o||(o={})),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.ETC1S=163]="ETC1S",t[t.UASTC=166]="UASTC"}(s||(s={})),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.SRGB=1]="SRGB"}(c||(c={})),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.LINEAR=1]="LINEAR",t[t.SRGB=2]="SRGB",t[t.ITU=3]="ITU",t[t.NTSC=4]="NTSC",t[t.SLOG=5]="SLOG",t[t.SLOG2=6]="SLOG2"}(u||(u={})),function(t){t[t.ALPHA_STRAIGHT=0]="ALPHA_STRAIGHT",t[t.ALPHA_PREMULTIPLIED=1]="ALPHA_PREMULTIPLIED"}(l||(l={})),function(t){t[t.RGB=0]="RGB",t[t.RRR=3]="RRR",t[t.GGG=4]="GGG",t[t.AAA=15]="AAA"}(f||(f={})),function(t){t[t.RGB=0]="RGB",t[t.RGBA=3]="RGBA",t[t.RRR=4]="RRR",t[t.RRRG=5]="RRRG"}(d||(d={}));var h=function t(){Object(a.a)(this,t),this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=i.NONE,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:o.BASICFORMAT,versionNumber:2,descriptorBlockSize:40,colorModel:s.UNSPECIFIED,colorPrimaries:c.SRGB,transferFunction:c.SRGB,flags:l.ALPHA_STRAIGHT,texelBlockDimension:{x:4,y:4,z:1,w:1},bytesPlane:[],samples:[]}],this.keyValue={},this.globalData=null},_=function(){function t(e,r,n,i){Object(a.a)(this,t),this._dataView=new DataView(e.buffer,e.byteOffset+r,n),this._littleEndian=i,this._offset=0}return Object(n.a)(t,[{key:"_nextUint8",value:function(){var t=this._dataView.getUint8(this._offset);return this._offset+=1,t}},{key:"_nextUint16",value:function(){var t=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,t}},{key:"_nextUint32",value:function(){var t=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,t}},{key:"_nextUint64",value:function(){var t=this._dataView.getUint32(this._offset,this._littleEndian)+Math.pow(2,32)*this._dataView.getUint32(this._offset+4,this._littleEndian);return this._offset+=8,t}},{key:"_skip",value:function(t){return this._offset+=t,this}},{key:"_scan",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=this._offset,n=0;this._dataView.getUint8(this._offset)!==e&&n<t;)n++,this._offset++;return n<t&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+r,n)}}]),t}();function b(e){return"undefined"!=typeof TextDecoder?(new TextDecoder).decode(e):t.from(e).toString("utf8")}function y(t){var e=new Uint8Array(t.buffer,t.byteOffset,p.length);if(e[0]!==p[0]||e[1]!==p[1]||e[2]!==p[2]||e[3]!==p[3]||e[4]!==p[4]||e[5]!==p[5]||e[6]!==p[6]||e[7]!==p[7]||e[8]!==p[8]||e[9]!==p[9]||e[10]!==p[10]||e[11]!==p[11])throw new Error("Missing KTX 2.0 identifier.");var r=new h,n=17*Uint32Array.BYTES_PER_ELEMENT,a=new _(t,p.length,n,!0);r.vkFormat=a._nextUint32(),r.typeSize=a._nextUint32(),r.pixelWidth=a._nextUint32(),r.pixelHeight=a._nextUint32(),r.pixelDepth=a._nextUint32(),r.layerCount=a._nextUint32(),r.faceCount=a._nextUint32();var i=a._nextUint32();r.supercompressionScheme=a._nextUint32();for(var o=a._nextUint32(),s=a._nextUint32(),c=a._nextUint32(),u=a._nextUint32(),l=a._nextUint64(),f=a._nextUint64(),d=new _(t,p.length+n,3*i*8,!0),y=0;y<i;y++)r.levels.push({levelData:new Uint8Array(t.buffer,t.byteOffset+d._nextUint64(),d._nextUint64()),uncompressedByteLength:d._nextUint64()});for(var S=new _(t,o,s,!0),v={vendorId:S._skip(4)._nextUint16(),descriptorType:S._nextUint16(),versionNumber:S._nextUint16(),descriptorBlockSize:S._nextUint16(),colorModel:S._nextUint8(),colorPrimaries:S._nextUint8(),transferFunction:S._nextUint8(),flags:S._nextUint8(),texelBlockDimension:{x:S._nextUint8()+1,y:S._nextUint8()+1,z:S._nextUint8()+1,w:S._nextUint8()+1},bytesPlane:[S._nextUint8(),S._nextUint8(),S._nextUint8(),S._nextUint8(),S._nextUint8(),S._nextUint8(),S._nextUint8(),S._nextUint8()],samples:[]},m=(v.descriptorBlockSize/4-6)/4,E=0;E<m;E++)v.samples[E]={bitOffset:S._nextUint16(),bitLength:S._nextUint8(),channelID:S._nextUint8(),samplePosition:[S._nextUint8(),S._nextUint8(),S._nextUint8(),S._nextUint8()],sampleLower:S._nextUint32(),sampleUpper:S._nextUint32()};r.dataFormatDescriptor.length=0,r.dataFormatDescriptor.push(v);for(var O=new _(t,c,u,!0);O._offset<u;){var g=O._nextUint32(),R=O._scan(g),A=b(R),T=O._scan(g-R.byteLength);r.keyValue[A]=A.match(/^ktx/i)?b(T):T,g%4&&O._skip(4-g%4)}if(f<=0)return r;for(var w=new _(t,l,f,!0),C=w._nextUint16(),x=w._nextUint16(),P=w._nextUint32(),D=w._nextUint32(),M=w._nextUint32(),j=w._nextUint32(),I=[],G=0;G<i;G++)I.push({imageFlags:w._nextUint32(),rgbSliceByteOffset:w._nextUint32(),rgbSliceByteLength:w._nextUint32(),alphaSliceByteOffset:w._nextUint32(),alphaSliceByteLength:w._nextUint32()});var B=l+w._offset,k=B+P,L=k+D,U=L+M,F=new Uint8Array(t.buffer,t.byteOffset+B,P),H=new Uint8Array(t.buffer,t.byteOffset+k,D),N=new Uint8Array(t.buffer,t.byteOffset+L,M),X=new Uint8Array(t.buffer,t.byteOffset+U,j);return r.globalData={endpointCount:C,selectorCount:x,imageDescs:I,endpointsData:F,selectorsData:H,tablesData:N,extendedData:X},r}}).call(this,r("HDXh").Buffer)},gETK:function(t,e,r){"use strict";(function(t,n){r.d(e,"a",(function(){return i})),r.d(e,"b",(function(){return o})),r.d(e,"c",(function(){return s}));var a={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==t&&t,document:"undefined"!=typeof document&&document},i=a.global||a.self||a.window||{},o="object"!=typeof n||"[object process]"!==String(n)||n.browser,s="function"==typeof importScripts,c=("undefined"!=typeof window&&window.orientation,void 0!==n&&n.version&&/v([0-9]*)/.exec(n.version));c&&parseFloat(c[1])}).call(this,r("yLpj"),r("8oxB"))},"i+OJ":function(t,e,r){"use strict";r.r(e);var n=r("dI71"),a=r("q1tI"),i=r.n(a),o=r("lxDd"),s=r("o0o1"),c=r.n(s),u=(r("7ZmC"),r("HaE+")),l=r("rePB");r("wcNg");function f(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return d(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0;return function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=t[Symbol.iterator]()).next.bind(r)}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var p={layers:{},layerFilter:{},parameters:{},effects:{},pickingRadius:{},onBeforeRender:{},onAfterRender:{},onClick:{},onHover:{},onDragStart:{},onDrag:{},onDragEnd:{},onError:{},debug:{},drawPickingColors:{},getCursor:{},getTooltip:{}};var h=r("udoT"),_=r("SOuN"),b=r("8nqg"),y=r("oFBv"),S=r("XQ8I");function v(t){var e=this;Object(_.h)(t),this.buffer=new b.a(t,new Int8Array([-1,-1,1,-1,-1,1,1,1])),this.model=new y.a(t,{vs:"\n      attribute vec2 a_pos;\n      varying vec2 v_texcoord;\n      void main(void) {\n          gl_Position = vec4(a_pos, 0.0, 1.0);\n          v_texcoord = (a_pos + 1.0) / 2.0;\n      }\n    ",fs:"\n      precision mediump float;\n      uniform sampler2D u_texture;\n      varying vec2 v_texcoord;\n      void main(void) {\n          vec4 rgba = texture2D(u_texture, v_texcoord);\n          rgba.rgb *= rgba.a;\n          gl_FragColor = rgba;\n      }\n    ",attributes:{a_pos:this.buffer},vertexCount:4,drawMode:t.TRIANGLE_STRIP}),this.deckFbo=new S.a(t,{width:1,height:1}),this.deckInstance=new h.a({viewState:{},controller:!1,gl:t,parameters:{depthTest:!0},_framebuffer:this.deckFbo,width:null,height:null,_customRender:function(t){"arcgis"===t?e.deckInstance._drawLayers(t):e.redraw()}})}function m(t){var e=this,r=t.gl,n=t.width,a=t.height,i=t.viewState,o=r.getParameter(r.FRAMEBUFFER_BINDING),s=window.devicePixelRatio;n=Math.round(n*s),a=Math.round(a*s),this.deckFbo.resize({width:n,height:a}),this.deckInstance.setProps({viewState:i}),this.deckInstance.redraw("arcgis"),Object(_.o)(r,{blend:!0,blendFunc:[r.ONE,r.ONE_MINUS_SRC_ALPHA],framebuffer:o,viewport:[0,0,n,a]},(function(){e.model.setUniforms({u_texture:e.deckFbo}).draw()}))}function E(){var t,e,r,n;null===(t=this.deckInstance)||void 0===t||t.finalize(),this.deckInstance=null,null===(e=this.model)||void 0===e||e.delete(),null===(r=this.buffer)||void 0===r||r.delete(),null===(n=this.deckFbo)||void 0===n||n.delete()}var O=r("iJYz");function g(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function R(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?g(Object(r),!0).forEach((function(e){Object(l.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var A=null;function T(t,e){return w.apply(this,arguments)}function w(){return(w=Object(u.a)(c.a.mark((function t(e,r){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Array.isArray(e)?null:e,t.next=3,C(n,r);case 3:if(!Array.isArray(e)){t.next=5;break}return t.abrupt("return",Object(O.loadModules)(e,r).then((function(t){return R(R({},A),{},{modules:t})})));case 5:return t.abrupt("return",A);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function C(t,e){return A||(t?x(t.layers.Layer,t.core.Accessor,t.views["2d"].layers.BaseLayerViewGL2D,t.views["3d"].externalRenderers):Object(O.loadModules)(["esri/layers/Layer","esri/core/Accessor","esri/views/2d/layers/BaseLayerViewGL2D","esri/views/3d/externalRenderers"],e).then((function(t){return x(t[0],t[1],t[2],t[3])})))}function x(t,e,r,n){var a=function(t){return t.createSubclass({properties:p,constructor:function(){var t=this;this._callbacks={},this.watch(Object.keys(p),(function(e,r,n){var a;t.emit("change",((a={})[n]=e,a))}))},on:function(t,e){this._callbacks[t]=this._callbacks[t]||[],this._callbacks[t].push(e)},emit:function(t,e){var r=this._callbacks[t];if(r)for(var n,a=f(r);!(n=a()).done;){(0,n.value)(e)}},toJSON:function(){for(var t,e={},r=f(this.keys());!(t=r()).done;){var n=t.value;void 0!==this[n]&&(e[n]=this[n])}return e}})}(e),i=function(t,e,r){return e.createSubclass({properties:{deck:{},blendMode:{},effect:{}},constructor:function(){this.deck=new t},createLayerView:function(t){return"2d"===t.type?new r({view:t,layer:this}):(console.error("DeckLayer does not support SceneView at the moment. Use DeckRenderer instead."),null)}})}(a,t,function(t){return t.createSubclass({properties:{deckgl:{},deckFbo:{},model:{},buffer:{}},attach:function(){var t=this,e=this.context;v.call(this,e),this.layer.deck.on("change",(function(e){return t.deckInstance.setProps(e)})),this.deckInstance.setProps(this.layer.deck.toJSON())},redraw:function(){this.requestRender()},detach:function(){E.call(this)},render:function(t){var e=this.view.state.size,r=e[0],n=e[1],a=t.state;m.call(this,{gl:t.context,width:r,height:n,viewState:{latitude:this.view.center.latitude,longitude:this.view.center.longitude,zoom:this.view.featuresTilingScheme.scaleToLevel(a.scale),bearing:-a.rotation,pitch:0}})}})}(r)),o=function(t,e){return function(){function r(e,r){this.view=e,this.deck=new t(r)}var n=r.prototype;return n.setup=function(t){var e=this,r=t.gl;v.call(this,r),this.deck.on("change",(function(t){return e.deckInstance.setProps(t)})),this.deckInstance.setProps(this.deck.toJSON())},n.dispose=function(){E.call(this)},n.redraw=function(){e.requestRender(this.view)},n.render=function(t){var e,r,n,a,i=this.view.size,o=i[0],s=i[1];m.call(this,{gl:t.gl,width:o,height:s,viewState:{latitude:this.view.center.latitude,longitude:this.view.center.longitude,altitude:(e=this.view.camera.fov,r=o/s,n=Math.sqrt(1+Math.pow(r,2)),a=e/2/180*Math.PI,n/2/Math.tan(a)),zoom:this.view.zoom,bearing:this.view.camera.heading,pitch:this.view.camera.tilt}})},r}()}(a,n);return A={DeckLayer:i,DeckRenderer:o}}var P=r("PSaa"),D=r("KQm4"),M=r("PC3p"),j=r("gETK"),I=r("p1p/"),G=r("SDD5"),B=r("kh/P"),k=r("FlnL"),L=r("kEPd"),U={draco:{decoderType:"object"==typeof WebAssembly?"wasm":"js",libraryPath:"libs/",extraAttributes:{},attributeNameEntry:void 0}},F={name:"Draco",id:j.b?"draco":"draco-nodejs",module:"draco",shapes:["mesh"],version:"3.3.1",worker:!0,extensions:["drc"],mimeTypes:["application/octet-stream"],binary:!0,tests:["DRACO"],options:U},H=r("ODXe"),N=r("1OyB"),X=r("vuIU");function K(t){for(var e=1/0,r=1/0,n=1/0,a=-1/0,i=-1/0,o=-1/0,s=t.POSITION?t.POSITION.value:[],c=s&&s.length,u=0;u<c;u+=3){var l=s[u],f=s[u+1],d=s[u+2];e=l<e?l:e,r=f<r?f:r,n=d<n?d:n,a=l>a?l:a,i=f>i?f:i,o=d>o?d:o}return[[e,r,n],[a,i,o]]}function z(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return V(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return V(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){s=!0,i=t},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function V(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var q=function(){function t(e,r){Object(N.a)(this,t),Object(l.a)(this,"fields",void 0),Object(l.a)(this,"metadata",void 0),function(t,e){if(!t)throw new Error(e||"loader assertion failed.")}(Array.isArray(e)),function(t){var e,r={},n=z(t);try{for(n.s();!(e=n.n()).done;){var a=e.value;r[a.name]&&console.warn("Schema: duplicated field name",a.name,a),r[a.name]=!0}}catch(i){n.e(i)}finally{n.f()}}(e),this.fields=e,this.metadata=r||new Map}return Object(X.a)(t,[{key:"compareTo",value:function(t){if(this.metadata!==t.metadata)return!1;if(this.fields.length!==t.fields.length)return!1;for(var e=0;e<this.fields.length;++e)if(!this.fields[e].compareTo(t.fields[e]))return!1;return!0}},{key:"select",value:function(){for(var e=Object.create(null),r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];for(var i=0,o=n;i<o.length;i++){var s=o[i];e[s]=!0}var c=this.fields.filter((function(t){return e[t.name]}));return new t(c,this.metadata)}},{key:"selectAt",value:function(){for(var e=this,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var i=n.map((function(t){return e.fields[t]})).filter(Boolean);return new t(i,this.metadata)}},{key:"assign",value:function(e){var r,n=this.metadata;if(e instanceof t){var a=e;r=a.fields,n=W(W(new Map,this.metadata),a.metadata)}else r=e;var i,o=Object.create(null),s=z(this.fields);try{for(s.s();!(i=s.n()).done;){var c=i.value;o[c.name]=c}}catch(d){s.e(d)}finally{s.f()}var u,l=z(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;o[f.name]=f}}catch(d){l.e(d)}finally{l.f()}return new t(Object.values(o),n)}}]),t}();function W(t,e){return new Map([].concat(Object(D.a)(t||new Map),Object(D.a)(e||new Map)))}var Q,J,Y,Z,$=function(){function t(e,r){Object(N.a)(this,t);var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Map;Object(l.a)(this,"name",void 0),Object(l.a)(this,"type",void 0),Object(l.a)(this,"nullable",void 0),Object(l.a)(this,"metadata",void 0),this.name=e,this.type=r,this.nullable=n,this.metadata=a}return Object(X.a)(t,[{key:"typeId",get:function(){return this.type&&this.type.typeId}},{key:"clone",value:function(){return new t(this.name,this.type,this.nullable,this.metadata)}},{key:"compareTo",value:function(t){return this.name===t.name&&this.type===t.type&&this.nullable===t.nullable&&this.metadata===t.metadata}},{key:"toString",value:function(){return"".concat(this.type).concat(this.nullable?", nullable":"").concat(this.metadata?", metadata: ".concat(this.metadata):"")}}]),t}(),tt=r("JX7q"),et=r("Ji7U"),rt=r("md7G"),nt=r("foSv");function at(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Object(nt.a)(t);if(e){var a=Object(nt.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(rt.a)(this,r)}}!function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.Float=3]="Float",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct=13]="Struct",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Dictionary=-1]="Dictionary",t[t.Int8=-2]="Int8",t[t.Int16=-3]="Int16",t[t.Int32=-4]="Int32",t[t.Int64=-5]="Int64",t[t.Uint8=-6]="Uint8",t[t.Uint16=-7]="Uint16",t[t.Uint32=-8]="Uint32",t[t.Uint64=-9]="Uint64",t[t.Float16=-10]="Float16",t[t.Float32=-11]="Float32",t[t.Float64=-12]="Float64",t[t.DateDay=-13]="DateDay",t[t.DateMillisecond=-14]="DateMillisecond",t[t.TimestampSecond=-15]="TimestampSecond",t[t.TimestampMillisecond=-16]="TimestampMillisecond",t[t.TimestampMicrosecond=-17]="TimestampMicrosecond",t[t.TimestampNanosecond=-18]="TimestampNanosecond",t[t.TimeSecond=-19]="TimeSecond",t[t.TimeMillisecond=-20]="TimeMillisecond",t[t.TimeMicrosecond=-21]="TimeMicrosecond",t[t.TimeNanosecond=-22]="TimeNanosecond",t[t.DenseUnion=-23]="DenseUnion",t[t.SparseUnion=-24]="SparseUnion",t[t.IntervalDayTime=-25]="IntervalDayTime",t[t.IntervalYearMonth=-26]="IntervalYearMonth"}(Q||(Q={}));var it=function(){function t(){Object(N.a)(this,t)}return Object(X.a)(t,[{key:"typeId",get:function(){return Q.NONE}},{key:"compareTo",value:function(t){return this===t}}],[{key:"isNull",value:function(t){return t&&t.typeId===Q.Null}},{key:"isInt",value:function(t){return t&&t.typeId===Q.Int}},{key:"isFloat",value:function(t){return t&&t.typeId===Q.Float}},{key:"isBinary",value:function(t){return t&&t.typeId===Q.Binary}},{key:"isUtf8",value:function(t){return t&&t.typeId===Q.Utf8}},{key:"isBool",value:function(t){return t&&t.typeId===Q.Bool}},{key:"isDecimal",value:function(t){return t&&t.typeId===Q.Decimal}},{key:"isDate",value:function(t){return t&&t.typeId===Q.Date}},{key:"isTime",value:function(t){return t&&t.typeId===Q.Time}},{key:"isTimestamp",value:function(t){return t&&t.typeId===Q.Timestamp}},{key:"isInterval",value:function(t){return t&&t.typeId===Q.Interval}},{key:"isList",value:function(t){return t&&t.typeId===Q.List}},{key:"isStruct",value:function(t){return t&&t.typeId===Q.Struct}},{key:"isUnion",value:function(t){return t&&t.typeId===Q.Union}},{key:"isFixedSizeBinary",value:function(t){return t&&t.typeId===Q.FixedSizeBinary}},{key:"isFixedSizeList",value:function(t){return t&&t.typeId===Q.FixedSizeList}},{key:"isMap",value:function(t){return t&&t.typeId===Q.Map}},{key:"isDictionary",value:function(t){return t&&t.typeId===Q.Dictionary}}]),t}();J=Symbol.toStringTag;var ot=function(t){Object(et.a)(r,t);var e=at(r);function r(t,n){var a;return Object(N.a)(this,r),a=e.call(this),Object(l.a)(Object(tt.a)(a),"isSigned",void 0),Object(l.a)(Object(tt.a)(a),"bitWidth",void 0),a.isSigned=t,a.bitWidth=n,a}return Object(X.a)(r,[{key:"typeId",get:function(){return Q.Int}},{key:J,get:function(){return"Int"}},{key:"toString",value:function(){return"".concat(this.isSigned?"I":"Ui","nt").concat(this.bitWidth)}}]),r}(it),st=function(t){Object(et.a)(r,t);var e=at(r);function r(){return Object(N.a)(this,r),e.call(this,!0,8)}return r}(ot),ct=function(t){Object(et.a)(r,t);var e=at(r);function r(){return Object(N.a)(this,r),e.call(this,!0,16)}return r}(ot),ut=function(t){Object(et.a)(r,t);var e=at(r);function r(){return Object(N.a)(this,r),e.call(this,!0,32)}return r}(ot),lt=function(t){Object(et.a)(r,t);var e=at(r);function r(){return Object(N.a)(this,r),e.call(this,!1,8)}return r}(ot),ft=function(t){Object(et.a)(r,t);var e=at(r);function r(){return Object(N.a)(this,r),e.call(this,!1,16)}return r}(ot),dt=function(t){Object(et.a)(r,t);var e=at(r);function r(){return Object(N.a)(this,r),e.call(this,!1,32)}return r}(ot),pt=32,ht=64;Y=Symbol.toStringTag;var _t=function(t){Object(et.a)(r,t);var e=at(r);function r(t){var n;return Object(N.a)(this,r),n=e.call(this),Object(l.a)(Object(tt.a)(n),"precision",void 0),n.precision=t,n}return Object(X.a)(r,[{key:"typeId",get:function(){return Q.Float}},{key:Y,get:function(){return"Float"}},{key:"toString",value:function(){return"Float".concat(this.precision)}}]),r}(it),bt=function(t){Object(et.a)(r,t);var e=at(r);function r(){return Object(N.a)(this,r),e.call(this,pt)}return r}(_t),yt=function(t){Object(et.a)(r,t);var e=at(r);function r(){return Object(N.a)(this,r),e.call(this,ht)}return r}(_t);Symbol.toStringTag;Symbol.toStringTag;Symbol.toStringTag;Symbol.toStringTag;Z=Symbol.toStringTag;var St=function(t){Object(et.a)(r,t);var e=at(r);function r(t,n){var a;return Object(N.a)(this,r),a=e.call(this),Object(l.a)(Object(tt.a)(a),"listSize",void 0),Object(l.a)(Object(tt.a)(a),"children",void 0),a.listSize=t,a.children=[n],a}return Object(X.a)(r,[{key:"typeId",get:function(){return Q.FixedSizeList}},{key:"valueType",get:function(){return this.children[0].type}},{key:"valueField",get:function(){return this.children[0]}},{key:Z,get:function(){return"FixedSizeList"}},{key:"toString",value:function(){return"FixedSizeList[".concat(this.listSize,"]<").concat(this.valueType,">")}}]),r}(it);Symbol.toStringTag;function vt(t,e,r){var n=function(t){switch(t.constructor){case Int8Array:return new st;case Uint8Array:return new lt;case Int16Array:return new ct;case Uint16Array:return new ft;case Int32Array:return new ut;case Uint32Array:return new dt;case Float32Array:return new bt;case Float64Array:return new yt;default:throw new Error("array type not supported")}}(e.value),a=r||function(t){var e=new Map;"byteOffset"in t&&e.set("byteOffset",t.byteOffset.toString(10));"byteStride"in t&&e.set("byteStride",t.byteStride.toString(10));"normalized"in t&&e.set("normalized",t.normalized.toString());return e}(e);return new $(t,new St(e.size,new $("value",n)),!1,a)}function mt(t,e,r){var n=Ot(e.metadata),a=[],i=function(t){var e={};for(var r in t){var n=t[r];e[n.name||"undefined"]=n}return e}(e.attributes);for(var o in t){var s=Et(o,t[o],i[o]);a.push(s)}if(r){var c=Et("indices",r);a.push(c)}return new q(a,n)}function Et(t,e,r){return vt(t,e,r?Ot(r.metadata):void 0)}function Ot(t){var e=new Map;for(var r in t)e.set("".concat(r,".string"),JSON.stringify(t[r]));return e}function gt(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return Rt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Rt(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){s=!0,i=t},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function Rt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function At(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Tt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?At(Object(r),!0).forEach((function(e){Object(l.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):At(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var wt={POSITION:"POSITION",NORMAL:"NORMAL",COLOR:"COLOR_0",TEX_COORD:"TEXCOORD_0"},Ct={1:Int8Array,2:Uint8Array,3:Int16Array,4:Uint16Array,5:Int32Array,6:Uint32Array,9:Float32Array},xt=function(){function t(e){Object(N.a)(this,t),Object(l.a)(this,"draco",void 0),Object(l.a)(this,"decoder",void 0),Object(l.a)(this,"metadataQuerier",void 0),this.draco=e,this.decoder=new this.draco.Decoder,this.metadataQuerier=new this.draco.MetadataQuerier}return Object(X.a)(t,[{key:"destroy",value:function(){this.draco.destroy(this.decoder),this.draco.destroy(this.metadataQuerier)}},{key:"parseSync",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=new this.draco.DecoderBuffer;r.Init(new Int8Array(t),t.byteLength),this._disableAttributeTransforms(e);var n=this.decoder.GetEncodedGeometryType(r),a=n===this.draco.TRIANGULAR_MESH?new this.draco.Mesh:new this.draco.PointCloud;try{var i;switch(n){case this.draco.TRIANGULAR_MESH:i=this.decoder.DecodeBufferToMesh(r,a);break;case this.draco.POINT_CLOUD:i=this.decoder.DecodeBufferToPointCloud(r,a);break;default:throw new Error("DRACO: Unknown geometry type.")}if(!i.ok()||!a.ptr){var o="DRACO decompression failed: ".concat(i.error_msg());throw new Error(o)}var s=this._getDracoLoaderData(a,n,e),c=this._getMeshData(a,s,e),u=K(c.attributes),l=mt(c.attributes,s,c.indices),f=Tt(Tt({loader:"draco",loaderData:s,header:{vertexCount:a.num_points(),boundingBox:u}},c),{},{schema:l});return f}finally{this.draco.destroy(r),a&&this.draco.destroy(a)}}},{key:"_getDracoLoaderData",value:function(t,e,r){var n=this._getTopLevelMetadata(t),a=this._getDracoAttributes(t,r);return{geometry_type:e,num_attributes:t.num_attributes(),num_points:t.num_points(),num_faces:t instanceof this.draco.Mesh?t.num_faces():0,metadata:n,attributes:a}}},{key:"_getDracoAttributes",value:function(t,e){for(var r={},n=0;n<t.num_attributes();n++){var a=this.decoder.GetAttribute(t,n),i=this._getAttributeMetadata(t,n);r[a.unique_id()]={unique_id:a.unique_id(),attribute_type:a.attribute_type(),data_type:a.data_type(),num_components:a.num_components(),byte_offset:a.byte_offset(),byte_stride:a.byte_stride(),normalized:a.normalized(),attribute_index:n,metadata:i};var o=this._getQuantizationTransform(a,e);o&&(r[a.unique_id()].quantization_transform=o);var s=this._getOctahedronTransform(a,e);s&&(r[a.unique_id()].octahedron_transform=s)}return r}},{key:"_getMeshData",value:function(t,e,r){var n=this._getMeshAttributes(e,t,r);if(!n.POSITION)throw new Error("DRACO: No position attribute found.");if(t instanceof this.draco.Mesh)switch(r.topology){case"triangle-strip":return{topology:"triangle-strip",mode:4,attributes:n,indices:{value:this._getTriangleStripIndices(t),size:1}};case"triangle-list":default:return{topology:"triangle-list",mode:5,attributes:n,indices:{value:this._getTriangleListIndices(t),size:1}}}return{topology:"point-list",mode:0,attributes:n}}},{key:"_getMeshAttributes",value:function(t,e,r){for(var n={},a=0,i=Object.values(t.attributes);a<i.length;a++){var o=i[a],s=this._deduceAttributeName(o,r);o.name=s;var c=this._getAttributeValues(e,o),u=c.value,l=c.size;n[s]={value:u,size:l,byteOffset:o.byte_offset,byteStride:o.byte_stride,normalized:o.normalized}}return n}},{key:"_getTriangleListIndices",value:function(t){var e=3*t.num_faces(),r=4*e,n=this.draco._malloc(r);try{return this.decoder.GetTrianglesUInt32Array(t,r,n),new Uint32Array(this.draco.HEAPF32.buffer,n,e).slice()}finally{this.draco._free(n)}}},{key:"_getTriangleStripIndices",value:function(t){var e=new this.draco.DracoInt32Array;try{return this.decoder.GetTriangleStripsFromMesh(t,e),function(t){for(var e=t.size(),r=new Int32Array(e),n=0;n<e;n++)r[n]=t.GetValue(n);return r}(e)}finally{this.draco.destroy(e)}}},{key:"_getAttributeValues",value:function(t,e){var r,n=Ct[e.data_type],a=e.num_components,i=t.num_points()*a,o=i*n.BYTES_PER_ELEMENT,s=function(t,e){switch(e){case Float32Array:return t.DT_FLOAT32;case Int8Array:return t.DT_INT8;case Int16Array:return t.DT_INT16;case Int32Array:return t.DT_INT32;case Uint8Array:return t.DT_UINT8;case Uint16Array:return t.DT_UINT16;case Uint32Array:return t.DT_UINT32;default:return t.DT_INVALID}}(this.draco,n),c=this.draco._malloc(o);try{var u=this.decoder.GetAttribute(t,e.attribute_index);this.decoder.GetAttributeDataArrayForAllPoints(t,u,s,o,c),r=new n(this.draco.HEAPF32.buffer,c,i).slice()}finally{this.draco._free(c)}return{value:r,size:a}}},{key:"_deduceAttributeName",value:function(t,e){for(var r=t.unique_id,n=0,a=Object.entries(e.extraAttributes||{});n<a.length;n++){var i=Object(H.a)(a[n],2),o=i[0];if(i[1]===r)return o}var s=t.attribute_type;for(var c in wt){if(this.draco[c]===s)return wt[c]}var u=e.attributeNameEntry||"name";return t.metadata[u]?t.metadata[u].string:"CUSTOM_ATTRIBUTE_".concat(r)}},{key:"_getTopLevelMetadata",value:function(t){var e=this.decoder.GetMetadata(t);return this._getDracoMetadata(e)}},{key:"_getAttributeMetadata",value:function(t,e){var r=this.decoder.GetAttributeMetadata(t,e);return this._getDracoMetadata(r)}},{key:"_getDracoMetadata",value:function(t){if(!t||!t.ptr)return{};for(var e={},r=this.metadataQuerier.NumEntries(t),n=0;n<r;n++){var a=this.metadataQuerier.GetEntryName(t,n);e[a]=this._getDracoMetadataField(t,a)}return e}},{key:"_getDracoMetadataField",value:function(t,e){var r=new this.draco.DracoInt32Array;try{this.metadataQuerier.GetIntEntryArray(t,e,r);var n=function(t){for(var e=t.size(),r=new Int32Array(e),n=0;n<e;n++)r[n]=t.GetValue(n);return r}(r);return{int:this.metadataQuerier.GetIntEntry(t,e),string:this.metadataQuerier.GetStringEntry(t,e),double:this.metadataQuerier.GetDoubleEntry(t,e),intArray:n}}finally{this.draco.destroy(r)}}},{key:"_disableAttributeTransforms",value:function(t){var e,r=t.quantizedAttributes,n=void 0===r?[]:r,a=t.octahedronAttributes,i=void 0===a?[]:a,o=gt([].concat(Object(D.a)(n),Object(D.a)(i)));try{for(o.s();!(e=o.n()).done;){var s=e.value;this.decoder.SkipAttributeTransform(this.draco[s])}}catch(c){o.e(c)}finally{o.f()}}},{key:"_getQuantizationTransform",value:function(t,e){var r=this,n=e.quantizedAttributes,a=void 0===n?[]:n,i=t.attribute_type();if(a.map((function(t){return r.decoder[t]})).includes(i)){var o=new this.draco.AttributeQuantizationTransform;try{if(o.InitFromAttribute(t))return{quantization_bits:o.quantization_bits(),range:o.range(),min_values:new Float32Array([1,2,3]).map((function(t){return o.min_value(t)}))}}finally{this.draco.destroy(o)}}return null}},{key:"_getOctahedronTransform",value:function(t,e){var r=this,n=e.octahedronAttributes,a=void 0===n?[]:n,i=t.attribute_type();if(a.map((function(t){return r.decoder[t]})).includes(i)){var o=new this.draco.AttributeQuantizationTransform;try{if(o.InitFromAttribute(t))return{quantization_bits:o.quantization_bits()}}finally{this.draco.destroy(o)}}return null}}]),t}();var Pt=r(15);var Dt={};function Mt(t){return jt.apply(this,arguments)}function jt(){return(jt=Object(u.a)(c.a.mark((function t(e){var r,n,a=arguments;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:null,n=a.length>2&&void 0!==a[2]?a[2]:{},r&&(e=It(e,r,n)),Dt[e]=Dt[e]||Gt(e),t.next=6,Dt[e];case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function It(t,e,r){if(t.startsWith("http"))return t;var n=r.modules||{};return n[t]?n[t]:j.b?r.CDN?(function(t,e){if(!t)throw new Error(e||"loaders.gl assertion failed.")}(r.CDN.startsWith("http")),"".concat(r.CDN,"/").concat(e,"@").concat("3.3.1","/dist/libs/").concat(t)):j.c?"../src/libs/".concat(t):"modules/".concat(e,"/src/libs/").concat(t):"modules/".concat(e,"/dist/libs/").concat(t)}function Gt(t){return Bt.apply(this,arguments)}function Bt(){return(Bt=Object(u.a)(c.a.mark((function t(e){var r,n,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.endsWith("wasm")){t.next=7;break}return t.next=3,fetch(e);case 3:return r=t.sent,t.next=6,r.arrayBuffer();case 6:return t.abrupt("return",t.sent);case 7:if(j.b){t.next=20;break}if(t.prev=8,t.t0=Pt&&Pt.requireFromFile,!t.t0){t.next=14;break}return t.next=13,Pt.requireFromFile(e);case 13:t.t0=t.sent;case 14:return t.abrupt("return",t.t0);case 17:return t.prev=17,t.t1=t.catch(8),t.abrupt("return",null);case 20:if(!j.c){t.next=22;break}return t.abrupt("return",importScripts(e));case 22:return t.next=24,fetch(e);case 24:return n=t.sent,t.next=27,n.text();case 27:return a=t.sent,t.abrupt("return",kt(a,e));case 29:case"end":return t.stop()}}),t,null,[[8,17]])})))).apply(this,arguments)}function kt(t,e){if(!j.b)return Pt.requireFromString&&Pt.requireFromString(t,e);if(j.c)return eval.call(j.a,t),null;var r=document.createElement("script");r.id=e;try{r.appendChild(document.createTextNode(t))}catch(n){r.text=t}return document.body.appendChild(r),null}function Lt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Ut(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Lt(Object(r),!0).forEach((function(e){Object(l.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Lt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Ft,Ht="https://www.gstatic.com/draco/versioned/decoders/".concat("1.5.5"),Nt="".concat(Ht,"/draco_decoder.js"),Xt="".concat(Ht,"/draco_wasm_wrapper.js"),Kt="".concat(Ht,"/draco_decoder.wasm");"https://raw.githubusercontent.com/google/draco/".concat("1.4.1","/javascript/draco_encoder.js");function zt(t){return Vt.apply(this,arguments)}function Vt(){return(Vt=Object(u.a)(c.a.mark((function t(e){var r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.modules||{},Ft=r.draco3d?Ft||r.draco3d.createDecoderModule({}).then((function(t){return{draco:t}})):Ft||qt(e),t.next=4,Ft;case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function qt(t){return Wt.apply(this,arguments)}function Wt(){return(Wt=Object(u.a)(c.a.mark((function t(e){var r,n,a,i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=e.draco&&e.draco.decoderType,t.next="js"===t.t0?3:(t.t0,7);break;case 3:return t.next=5,Mt(Nt,"draco",e);case 5:return r=t.sent,t.abrupt("break",21);case 7:return t.t1=Promise,t.next=10,Mt(Xt,"draco",e);case 10:return t.t2=t.sent,t.next=13,Mt(Kt,"draco",e);case 13:return t.t3=t.sent,t.t4=[t.t2,t.t3],t.next=17,t.t1.all.call(t.t1,t.t4);case 17:a=t.sent,i=Object(H.a)(a,2),r=i[0],n=i[1];case 21:return r=r||globalThis.DracoDecoderModule,t.next=24,Qt(r,n);case 24:return t.abrupt("return",t.sent);case 25:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Qt(t,e){var r={};return e&&(r.wasmBinary=e),new Promise((function(e){t(Ut(Ut({},r),{},{onModuleLoaded:function(t){return e({draco:t})}}))}))}function Jt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Yt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Jt(Object(r),!0).forEach((function(e){Object(l.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Jt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}j.b;var Zt=Yt(Yt({},F),{},{parse:function(t,e){return $t.apply(this,arguments)}});function $t(){return($t=Object(u.a)(c.a.mark((function t(e,r){var n,a,i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,zt(r);case 2:return n=t.sent,a=n.draco,i=new xt(a),t.prev=5,t.abrupt("return",i.parseSync(e,null==r?void 0:r.draco));case 7:return t.prev=7,i.destroy(),t.finish(7);case 10:case"end":return t.stop()}}),t,null,[[5,,7,10]])})))).apply(this,arguments)}var te=r("YqI2");function ee(t,e){for(var r=new Array(e.mipMapLevels),n=e.width,a=e.height,i=0,o=0;o<e.mipMapLevels;++o){var s=ne(e,n,a,t,o),c=re(t,o,i,s);r[o]={compressed:!0,format:e.internalFormat,data:c,width:n,height:a,levelSize:s},n=Math.max(1,n>>1),a=Math.max(1,a>>1),i+=s}return r}function re(t,e,r,n){return Array.isArray(t)?t[e].levelData:new Uint8Array(t.buffer,t.byteOffset+r,n)}function ne(t,e,r,n,a){return Array.isArray(n)?t.sizeFunction(n[a]):t.sizeFunction(e,r)}var ae={COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_RGBA8_ETC2_EAC:37493,COMPRESSED_SRGB8_ETC2:37494,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37495,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37496,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37497,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGB_ETC1_WEBGL:36196,COMPRESSED_RGB_ATC_WEBGL:35986,COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL:35987,COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL:34798,COMPRESSED_RGBA_ASTC_4X4_KHR:37808,COMPRESSED_RGBA_ASTC_5X4_KHR:37809,COMPRESSED_RGBA_ASTC_5X5_KHR:37810,COMPRESSED_RGBA_ASTC_6X5_KHR:37811,COMPRESSED_RGBA_ASTC_6X6_KHR:37812,COMPRESSED_RGBA_ASTC_8X5_KHR:37813,COMPRESSED_RGBA_ASTC_8X6_KHR:37814,COMPRESSED_RGBA_ASTC_8X8_KHR:37815,COMPRESSED_RGBA_ASTC_10X5_KHR:37816,COMPRESSED_RGBA_ASTC_10X6_KHR:37817,COMPRESSED_RGBA_ASTC_10X8_KHR:37818,COMPRESSED_RGBA_ASTC_10X10_KHR:37819,COMPRESSED_RGBA_ASTC_12X10_KHR:37820,COMPRESSED_RGBA_ASTC_12X12_KHR:37821,COMPRESSED_SRGB8_ALPHA8_ASTC_4X4_KHR:37840,COMPRESSED_SRGB8_ALPHA8_ASTC_5X4_KHR:37841,COMPRESSED_SRGB8_ALPHA8_ASTC_5X5_KHR:37842,COMPRESSED_SRGB8_ALPHA8_ASTC_6X5_KHR:37843,COMPRESSED_SRGB8_ALPHA8_ASTC_6X6_KHR:37844,COMPRESSED_SRGB8_ALPHA8_ASTC_8X5_KHR:37845,COMPRESSED_SRGB8_ALPHA8_ASTC_8X6_KHR:37846,COMPRESSED_SRGB8_ALPHA8_ASTC_8X8_KHR:37847,COMPRESSED_SRGB8_ALPHA8_ASTC_10X5_KHR:37848,COMPRESSED_SRGB8_ALPHA8_ASTC_10X6_KHR:37849,COMPRESSED_SRGB8_ALPHA8_ASTC_10X8_KHR:37850,COMPRESSED_SRGB8_ALPHA8_ASTC_10X10_KHR:37851,COMPRESSED_SRGB8_ALPHA8_ASTC_12X10_KHR:37852,COMPRESSED_SRGB8_ALPHA8_ASTC_12X12_KHR:37853,COMPRESSED_RED_RGTC1_EXT:36283,COMPRESSED_SIGNED_RED_RGTC1_EXT:36284,COMPRESSED_RED_GREEN_RGTC2_EXT:36285,COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT:36286,COMPRESSED_SRGB_S3TC_DXT1_EXT:35916,COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT:35917,COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT:35918,COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT:35919},ie={131:ae.COMPRESSED_RGB_S3TC_DXT1_EXT,132:ae.COMPRESSED_SRGB_S3TC_DXT1_EXT,133:ae.COMPRESSED_RGBA_S3TC_DXT1_EXT,134:ae.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,135:ae.COMPRESSED_RGBA_S3TC_DXT3_EXT,136:ae.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,137:ae.COMPRESSED_RGBA_S3TC_DXT5_EXT,138:ae.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,139:ae.COMPRESSED_RED_RGTC1_EXT,140:ae.COMPRESSED_SIGNED_RED_RGTC1_EXT,141:ae.COMPRESSED_RED_GREEN_RGTC2_EXT,142:ae.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT,147:ae.COMPRESSED_RGB8_ETC2,148:ae.COMPRESSED_SRGB8_ETC2,149:ae.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2,150:ae.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2,151:ae.COMPRESSED_RGBA8_ETC2_EAC,152:ae.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC,153:ae.COMPRESSED_R11_EAC,154:ae.COMPRESSED_SIGNED_R11_EAC,155:ae.COMPRESSED_RG11_EAC,156:ae.COMPRESSED_SIGNED_RG11_EAC,157:ae.COMPRESSED_RGBA_ASTC_4x4_KHR,158:ae.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR,159:ae.COMPRESSED_RGBA_ASTC_5x4_KHR,160:ae.COMPRESSED_SRGB8_ALPHA8_ASTC_5X4_KHR,161:ae.COMPRESSED_RGBA_ASTC_5x5_KHR,162:ae.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR,163:ae.COMPRESSED_RGBA_ASTC_6x5_KHR,164:ae.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR,165:ae.COMPRESSED_RGBA_ASTC_6x6_KHR,166:ae.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR,167:ae.COMPRESSED_RGBA_ASTC_8x5_KHR,168:ae.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR,169:ae.COMPRESSED_RGBA_ASTC_8x6_KHR,170:ae.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR,171:ae.COMPRESSED_RGBA_ASTC_8x8_KHR,172:ae.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR,173:ae.COMPRESSED_RGBA_ASTC_10x5_KHR,174:ae.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR,175:ae.COMPRESSED_RGBA_ASTC_10x6_KHR,176:ae.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR,177:ae.COMPRESSED_RGBA_ASTC_10x8_KHR,178:ae.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR,179:ae.COMPRESSED_RGBA_ASTC_10x10_KHR,180:ae.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR,181:ae.COMPRESSED_RGBA_ASTC_12x10_KHR,182:ae.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR,183:ae.COMPRESSED_RGBA_ASTC_12x12_KHR,184:ae.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR,1000054e3:ae.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG,1000054001:ae.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG,1000066e3:ae.COMPRESSED_RGBA_ASTC_4x4_KHR,1000066001:ae.COMPRESSED_RGBA_ASTC_5x4_KHR,1000066002:ae.COMPRESSED_RGBA_ASTC_5x5_KHR,1000066003:ae.COMPRESSED_RGBA_ASTC_6x5_KHR,1000066004:ae.COMPRESSED_RGBA_ASTC_6x6_KHR,1000066005:ae.COMPRESSED_RGBA_ASTC_8x5_KHR,1000066006:ae.COMPRESSED_RGBA_ASTC_8x6_KHR,1000066007:ae.COMPRESSED_RGBA_ASTC_8x8_KHR,1000066008:ae.COMPRESSED_RGBA_ASTC_10x5_KHR,1000066009:ae.COMPRESSED_RGBA_ASTC_10x6_KHR,1000066010:ae.COMPRESSED_RGBA_ASTC_10x8_KHR,1000066011:ae.COMPRESSED_RGBA_ASTC_10x10_KHR,1000066012:ae.COMPRESSED_RGBA_ASTC_12x10_KHR,1000066013:ae.COMPRESSED_RGBA_ASTC_12x12_KHR};var oe=[171,75,84,88,32,50,48,187,13,10,26,10];function se(t){var e=new Uint8Array(t);return!(e.byteLength<oe.length||e[0]!==oe[0]||e[1]!==oe[1]||e[2]!==oe[2]||e[3]!==oe[3]||e[4]!==oe[4]||e[5]!==oe[5]||e[6]!==oe[6]||e[7]!==oe[7]||e[8]!==oe[8]||e[9]!==oe[9]||e[10]!==oe[10]||e[11]!==oe[11])}function ce(t){var e,r=new Uint8Array(t),n=Object(te.a)(r),a=Math.max(1,n.levels.length),i=n.pixelWidth,o=n.pixelHeight,s=(e=n.vkFormat,ie[e]);return ee(n.levels,{mipMapLevels:a,width:i,height:o,sizeFunction:function(t){return t.uncompressedByteLength},internalFormat:s})}var ue=r("DYWF"),le=542327876,fe=31,de=0,pe=1,he=2,_e=3,be=4,ye=7,Se=20,ve=21,me=131072,Ee=4,Oe={DXT1:ae.COMPRESSED_RGB_S3TC_DXT1_EXT,DXT3:ae.COMPRESSED_RGBA_S3TC_DXT3_EXT,DXT5:ae.COMPRESSED_RGBA_S3TC_DXT5_EXT,"ATC ":ae.COMPRESSED_RGB_ATC_WEBGL,ATCA:ae.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL,ATCI:ae.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL},ge={DXT1:Ae,DXT3:Te,DXT5:Te,"ATC ":Ae,ATCA:Te,ATCI:Te};function Re(t){var e=new Int32Array(t,0,fe),r=e[ve];Object(ue.a)(Boolean(e[Se]&Ee),"DDS: Unsupported format, must contain a FourCC code");var n,a=(n=r,String.fromCharCode(255&n,n>>8&255,n>>16&255,n>>24&255)),i=Oe[a],o=ge[a];Object(ue.a)(i&&o,"DDS: Unknown pixel format ".concat(r));var s=1;e[he]&me&&(s=Math.max(1,e[ye]));var c=e[be],u=e[_e],l=e[pe]+4;return ee(new Uint8Array(t,l),{mipMapLevels:s,width:c,height:u,sizeFunction:o,internalFormat:i})}function Ae(t,e){return(t+3>>2)*(e+3>>2)*8}function Te(t,e){return(t+3>>2)*(e+3>>2)*16}var we=55727696,Ce=1347834371,xe=13,Pe=52,De=0,Me=2,je=4,Ie=6,Ge=7,Be=11,ke=12,Le={0:[ae.COMPRESSED_RGB_PVRTC_2BPPV1_IMG],1:[ae.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG],2:[ae.COMPRESSED_RGB_PVRTC_4BPPV1_IMG],3:[ae.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG],6:[ae.COMPRESSED_RGB_ETC1_WEBGL],7:[ae.COMPRESSED_RGB_S3TC_DXT1_EXT],9:[ae.COMPRESSED_RGBA_S3TC_DXT3_EXT],11:[ae.COMPRESSED_RGBA_S3TC_DXT5_EXT],22:[ae.COMPRESSED_RGB8_ETC2],23:[ae.COMPRESSED_RGBA8_ETC2_EAC],24:[ae.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2],25:[ae.COMPRESSED_R11_EAC],26:[ae.COMPRESSED_RG11_EAC],27:[ae.COMPRESSED_RGBA_ASTC_4X4_KHR,ae.COMPRESSED_SRGB8_ALPHA8_ASTC_4X4_KHR],28:[ae.COMPRESSED_RGBA_ASTC_5X4_KHR,ae.COMPRESSED_SRGB8_ALPHA8_ASTC_5X4_KHR],29:[ae.COMPRESSED_RGBA_ASTC_5X5_KHR,ae.COMPRESSED_SRGB8_ALPHA8_ASTC_5X5_KHR],30:[ae.COMPRESSED_RGBA_ASTC_6X5_KHR,ae.COMPRESSED_SRGB8_ALPHA8_ASTC_6X5_KHR],31:[ae.COMPRESSED_RGBA_ASTC_6X6_KHR,ae.COMPRESSED_SRGB8_ALPHA8_ASTC_6X6_KHR],32:[ae.COMPRESSED_RGBA_ASTC_8X5_KHR,ae.COMPRESSED_SRGB8_ALPHA8_ASTC_8X5_KHR],33:[ae.COMPRESSED_RGBA_ASTC_8X6_KHR,ae.COMPRESSED_SRGB8_ALPHA8_ASTC_8X6_KHR],34:[ae.COMPRESSED_RGBA_ASTC_8X8_KHR,ae.COMPRESSED_SRGB8_ALPHA8_ASTC_8X8_KHR],35:[ae.COMPRESSED_RGBA_ASTC_10X5_KHR,ae.COMPRESSED_SRGB8_ALPHA8_ASTC_10X5_KHR],36:[ae.COMPRESSED_RGBA_ASTC_10X6_KHR,ae.COMPRESSED_SRGB8_ALPHA8_ASTC_10X6_KHR],37:[ae.COMPRESSED_RGBA_ASTC_10X8_KHR,ae.COMPRESSED_SRGB8_ALPHA8_ASTC_10X8_KHR],38:[ae.COMPRESSED_RGBA_ASTC_10X10_KHR,ae.COMPRESSED_SRGB8_ALPHA8_ASTC_10X10_KHR],39:[ae.COMPRESSED_RGBA_ASTC_12X10_KHR,ae.COMPRESSED_SRGB8_ALPHA8_ASTC_12X10_KHR],40:[ae.COMPRESSED_RGBA_ASTC_12X12_KHR,ae.COMPRESSED_SRGB8_ALPHA8_ASTC_12X12_KHR]},Ue={0:Fe,1:Fe,2:He,3:He,6:Ne,7:Ne,9:Xe,11:Xe,22:Ne,23:Xe,24:Ne,25:Ne,26:Xe,27:Xe,28:function(t,e){return Math.floor((t+4)/5)*Math.floor((e+3)/4)*16},29:function(t,e){return Math.floor((t+4)/5)*Math.floor((e+4)/5)*16},30:function(t,e){return Math.floor((t+5)/6)*Math.floor((e+4)/5)*16},31:function(t,e){return Math.floor((t+5)/6)*Math.floor((e+5)/6)*16},32:function(t,e){return Math.floor((t+7)/8)*Math.floor((e+4)/5)*16},33:function(t,e){return Math.floor((t+7)/8)*Math.floor((e+5)/6)*16},34:function(t,e){return Math.floor((t+7)/8)*Math.floor((e+7)/8)*16},35:function(t,e){return Math.floor((t+9)/10)*Math.floor((e+4)/5)*16},36:function(t,e){return Math.floor((t+9)/10)*Math.floor((e+5)/6)*16},37:function(t,e){return Math.floor((t+9)/10)*Math.floor((e+7)/8)*16},38:function(t,e){return Math.floor((t+9)/10)*Math.floor((e+9)/10)*16},39:function(t,e){return Math.floor((t+11)/12)*Math.floor((e+9)/10)*16},40:function(t,e){return Math.floor((t+11)/12)*Math.floor((e+11)/12)*16}};function Fe(t,e){return(t=Math.max(t,16))*(e=Math.max(e,8))/4}function He(t,e){return(t=Math.max(t,8))*(e=Math.max(e,8))/2}function Ne(t,e){return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8}function Xe(t,e){return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16}function Ke(t){if(se(t))return ce(t);if(function(t){return new Uint32Array(t,0,fe)[de]===le}(t))return Re(t);if(function(t){var e=new Uint32Array(t,0,xe)[De];return e===we||e===Ce}(t))return function(t){var e=new Uint32Array(t,0,xe),r=e[Me],n=e[je],a=Le[r]||[],i=a.length>1&&n?a[1]:a[0],o=Ue[r],s=e[Be],c=e[Ge],u=e[Ie],l=Pe+e[ke];return ee(new Uint8Array(t,l),{mipMapLevels:s,width:c,height:u,sizeFunction:o,internalFormat:i})}(t);throw new Error("Texture container format not recognized")}var ze,Ve,qe="https://unpkg.com/@loaders.gl/textures@".concat("3.3.1","/dist/libs/basis_encoder.wasm"),We="https://unpkg.com/@loaders.gl/textures@".concat("3.3.1","/dist/libs/basis_encoder.js");function Qe(t){return Je.apply(this,arguments)}function Je(){return(Je=Object(u.a)(c.a.mark((function t(e){var r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r=e.modules||{}).basis){t.next=3;break}return t.abrupt("return",r.basis);case 3:return ze=ze||Ye(e),t.next=6,ze;case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Ye(t){return Ze.apply(this,arguments)}function Ze(){return(Ze=Object(u.a)(c.a.mark((function t(e){var r,n,a,i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=null,n=null,t.t0=Promise,t.next=5,Mt("basis_transcoder.js","textures",e);case 5:return t.t1=t.sent,t.next=8,Mt("basis_transcoder.wasm","textures",e);case 8:return t.t2=t.sent,t.t3=[t.t1,t.t2],t.next=12,t.t0.all.call(t.t0,t.t3);case 12:return a=t.sent,i=Object(H.a)(a,2),r=i[0],n=i[1],r=r||globalThis.BASIS,t.next=19,$e(r,n);case 19:return t.abrupt("return",t.sent);case 20:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function $e(t,e){var r={};return e&&(r.wasmBinary=e),new Promise((function(e){t(r).then((function(t){var r=t.BasisFile;(0,t.initializeBasis)(),e({BasisFile:r})}))}))}function tr(t){return er.apply(this,arguments)}function er(){return(er=Object(u.a)(c.a.mark((function t(e){var r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r=e.modules||{}).basisEncoder){t.next=3;break}return t.abrupt("return",r.basisEncoder);case 3:return Ve=Ve||rr(e),t.next=6,Ve;case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function rr(t){return nr.apply(this,arguments)}function nr(){return(nr=Object(u.a)(c.a.mark((function t(e){var r,n,a,i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=null,n=null,t.t0=Promise,t.next=5,Mt(We,"textures",e);case 5:return t.t1=t.sent,t.next=8,Mt(qe,"textures",e);case 8:return t.t2=t.sent,t.t3=[t.t1,t.t2],t.next=12,t.t0.all.call(t.t0,t.t3);case 12:return a=t.sent,i=Object(H.a)(a,2),r=i[0],n=i[1],r=r||globalThis.BASIS,t.next=19,ar(r,n);case 19:return t.abrupt("return",t.sent);case 20:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ar(t,e){var r={};return e&&(r.wasmBinary=e),new Promise((function(e){t(r).then((function(t){var r=t.BasisFile,n=t.KTX2File,a=t.initializeBasis,i=t.BasisEncoder;a(),e({BasisFile:r,KTX2File:n,BasisEncoder:i})}))}))}function ir(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return or(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return or(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){s=!0,i=t},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function or(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var sr=["","WEBKIT_","MOZ_"],cr={WEBGL_compressed_texture_s3tc:"dxt",WEBGL_compressed_texture_s3tc_srgb:"dxt-srgb",WEBGL_compressed_texture_etc1:"etc1",WEBGL_compressed_texture_etc:"etc2",WEBGL_compressed_texture_pvrtc:"pvrtc",WEBGL_compressed_texture_atc:"atc",WEBGL_compressed_texture_astc:"astc",EXT_texture_compression_rgtc:"rgtc"},ur=null;function lr(t){if(!ur){t=t||function(){try{return document.createElement("canvas").getContext("webgl")}catch(t){return null}}()||void 0,ur=new Set;var e,r=ir(sr);try{for(r.s();!(e=r.n()).done;){var n=e.value;for(var a in cr)if(t&&t.getExtension("".concat(n).concat(a))){var i=cr[a];ur.add(i)}}}catch(o){r.e(o)}finally{r.f()}}return ur}var fr={etc1:{basisFormat:0,compressed:!0,format:ae.COMPRESSED_RGB_ETC1_WEBGL},etc2:{basisFormat:1,compressed:!0},bc1:{basisFormat:2,compressed:!0,format:ae.COMPRESSED_RGB_S3TC_DXT1_EXT},bc3:{basisFormat:3,compressed:!0,format:ae.COMPRESSED_RGBA_S3TC_DXT5_EXT},bc4:{basisFormat:4,compressed:!0},bc5:{basisFormat:5,compressed:!0},"bc7-m6-opaque-only":{basisFormat:6,compressed:!0},"bc7-m5":{basisFormat:7,compressed:!0},"pvrtc1-4-rgb":{basisFormat:8,compressed:!0,format:ae.COMPRESSED_RGB_PVRTC_4BPPV1_IMG},"pvrtc1-4-rgba":{basisFormat:9,compressed:!0,format:ae.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG},"astc-4x4":{basisFormat:10,compressed:!0,format:ae.COMPRESSED_RGBA_ASTC_4X4_KHR},"atc-rgb":{basisFormat:11,compressed:!0},"atc-rgba-interpolated-alpha":{basisFormat:12,compressed:!0},rgba32:{basisFormat:13,compressed:!1},rgb565:{basisFormat:14,compressed:!1},bgr565:{basisFormat:15,compressed:!1},rgba4444:{basisFormat:16,compressed:!1}};function dr(t,e){return pr.apply(this,arguments)}function pr(){return(pr=Object(u.a)(c.a.mark((function t(e,r){var n,a,i,o,s,u;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("auto"!==r.basis.containerFormat){t.next=11;break}if(!se(e)){t.next=6;break}return t.next=4,tr(r);case 4:return n=t.sent,t.abrupt("return",br(n.KTX2File,e,r));case 6:return t.next=8,Qe(r);case 8:return a=t.sent,i=a.BasisFile,t.abrupt("return",hr(i,e,r));case 11:t.t0=r.basis.module,t.next="encoder"===t.t0?14:(t.t0,22);break;case 14:return t.next=16,tr(r);case 16:o=t.sent,t.t1=r.basis.containerFormat,t.next="ktx2"===t.t1?20:(t.t1,21);break;case 20:return t.abrupt("return",br(o.KTX2File,e,r));case 21:return t.abrupt("return",hr(o.BasisFile,e,r));case 22:return t.next=24,Qe(r);case 24:return s=t.sent,u=s.BasisFile,t.abrupt("return",hr(u,e,r));case 27:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function hr(t,e,r){var n=new t(new Uint8Array(e));try{if(!n.startTranscoding())throw new Error("Failed to start basis transcoding");for(var a=n.getNumImages(),i=[],o=0;o<a;o++){for(var s=n.getNumLevels(o),c=[],u=0;u<s;u++)c.push(_r(n,o,u,r));i.push(c)}return i}finally{n.close(),n.delete()}}function _r(t,e,r,n){var a=t.getImageWidth(e,r),i=t.getImageHeight(e,r),o=t.getHasAlpha(),s=Sr(n,o),c=s.compressed,u=s.format,l=s.basisFormat,f=t.getImageTranscodedSizeInBytes(e,r,l),d=new Uint8Array(f);if(!t.transcodeImage(d,e,r,l,0,0))throw new Error("failed to start Basis transcoding");return{width:a,height:i,data:d,compressed:c,format:u,hasAlpha:o}}function br(t,e,r){var n=new t(new Uint8Array(e));try{if(!n.startTranscoding())throw new Error("failed to start KTX2 transcoding");for(var a=n.getLevels(),i=[],o=0;o<a;o++){i.push(yr(n,o,r));break}return[i]}finally{n.close(),n.delete()}}function yr(t,e,r){var n=t.getImageLevelInfo(e,0,0),a=n.alphaFlag,i=n.height,o=n.width,s=Sr(r,a),c=s.compressed,u=s.format,l=s.basisFormat,f=t.getImageTranscodedSizeInBytes(e,0,0,l),d=new Uint8Array(f);if(!t.transcodeImage(d,e,0,0,l,0,-1,-1))throw new Error("Failed to transcode KTX2 image");return{width:o,height:i,data:d,compressed:c,levelSize:f,hasAlpha:a,format:u}}function Sr(t,e){var r=t&&t.basis&&t.basis.format;return"auto"===r&&(r=vr()),"object"==typeof r&&(r=e?r.alpha:r.noAlpha),r=r.toLowerCase(),fr[r]}function vr(){var t=lr();return t.has("astc")?"astc-4x4":t.has("dxt")?{alpha:"bc3",noAlpha:"bc1"}:t.has("pvrtc")?{alpha:"pvrtc1-4-rgba",noAlpha:"pvrtc1-4-rgb"}:t.has("etc1")?"etc1":t.has("etc2")?"etc2":"rgb565"}function mr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Er(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?mr(Object(r),!0).forEach((function(e){Object(l.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Or,gr={name:"Texture Containers",id:"compressed-texture",module:"textures",version:"3.3.1",worker:!0,extensions:["ktx","ktx2","dds","pvr"],mimeTypes:["image/ktx2","image/ktx","image/vnd-ms.dds","image/x-dds","application/octet-stream"],binary:!0,options:{"compressed-texture":{libraryPath:"libs/",useBasis:!1}}},Rr=Er(Er({},gr),{},{parse:(Or=Object(u.a)(c.a.mark((function t(e,r){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r["compressed-texture"].useBasis){t.next=5;break}return r.basis=Er(Er({format:{alpha:"BC3",noAlpha:"BC1"}},r.basis),{},{containerFormat:"ktx2",module:"encoder"}),t.next=4,dr(e,r);case 4:return t.abrupt("return",t.sent[0]);case 5:return t.abrupt("return",Ke(e));case 6:case"end":return t.stop()}}),t)}))),function(t,e){return Or.apply(this,arguments)})});function Ar(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Tr(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ar(Object(r),!0).forEach((function(e){Object(l.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ar(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var wr,Cr,xr={name:"Basis",id:j.b?"basis":"basis-nodejs",module:"textures",version:"3.3.1",worker:!0,extensions:["basis","ktx2"],mimeTypes:["application/octet-stream","image/ktx2"],tests:["sB"],binary:!0,options:{basis:{format:"auto",libraryPath:"libs/",containerFormat:"auto",module:"transcoder"}}},Pr=Tr(Tr({},xr),{},{parse:dr});function Dr(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e?"".concat(t,"?token=").concat(e):t}function Mr(t,e){for(var r=[],n=t.attributeStorageInfo,a=t.url,i=0;i<n.length;i++){var o=n[i].key;r.push("".concat(a,"/nodes/").concat(e,"/attributes/").concat(o,"/0"))}return r}!function(t){t.UInt8="UInt8",t.UInt16="UInt16",t.UInt32="UInt32",t.UInt64="UInt64",t.Int16="Int16",t.Int32="Int32",t.Int64="Int64",t.Float32="Float32",t.Float64="Float64"}(wr||(wr={})),function(t){t.vertexCount="vertexCount",t.featureCount="featureCount"}(Cr||(Cr={}));var jr=r("0mpS");function Ir(t){switch(t){case wr.UInt8:return Uint8Array;case wr.UInt16:return Uint16Array;case wr.UInt32:return Uint32Array;case wr.Float32:return Float32Array;case wr.UInt64:return Float64Array;default:throw new Error("parse i3s tile content: unknown type of data: ".concat(t))}}var Gr={UInt8:jr.a.UNSIGNED_BYTE,UInt16:jr.a.UNSIGNED_SHORT,Float32:jr.a.FLOAT,UInt32:jr.a.UNSIGNED_INT,UInt64:jr.a.DOUBLE};function Br(t){switch(t){case wr.UInt8:return 1;case wr.UInt16:case wr.Int16:return 2;case wr.UInt32:case wr.Int32:case wr.Float32:return 4;case wr.UInt64:case wr.Int64:case wr.Float64:return 8;default:throw new Error("parse i3s tile content: unknown size of data: ".concat(t))}}var kr;function Lr(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return Ur(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ur(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){s=!0,i=t},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function Ur(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Fr(t,e){return Hr.apply(this,arguments)}function Hr(){return(Hr=Object(u.a)(c.a.mark((function t(e,r){var n,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.attributeName,a=r.attributeType,n){t.next=3;break}return t.abrupt("return",{});case 3:return t.abrupt("return",Object(l.a)({},n,a?Nr(a,e):null));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Nr(t,e){switch(t){case"String":return function(t){var e=[];try{var r,n=new DataView(t,0,4).getUint32(0,!0),a=new Uint32Array(t,8,n),i=8+4*n,o=Lr(a);try{for(o.s();!(r=o.n()).done;){var s=r.value,c=new TextDecoder("utf-8"),u=new Uint8Array(t,i,s);e.push(c.decode(u)),i+=s}}catch(l){o.e(l)}finally{o.f()}}catch(f){console.error("Parse string attribute error: ",f.message)}return e}(e);case"Oid32":return Xr(e);case"Float64":return function(t){return new Float64Array(t,8)}(e);case"Int16":return function(t){return new Int16Array(t,4)}(e);default:return Xr(e)}}function Xr(t){return new Uint32Array(t,4)}!function(t){t[t.DEFAULT=-1]="DEFAULT",t[t.LNGLAT=1]="LNGLAT",t[t.METER_OFFSETS=2]="METER_OFFSETS",t[t.LNGLAT_OFFSETS=3]="LNGLAT_OFFSETS",t[t.CARTESIAN=0]="CARTESIAN"}(kr||(kr={}));var Kr={name:"I3S Attribute",id:"i3s-attribute",module:"i3s",version:"3.3.1",mimeTypes:["application/binary"],parse:function(t,e){return zr.apply(this,arguments)},extensions:["bin"],options:{},binary:!0};function zr(){return(zr=Object(u.a)(c.a.mark((function t(e,r){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=Fr(e,r),t.abrupt("return",e);case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Vr(t){return t.hasOwnProperty("objectIds")?"Oid32":t.hasOwnProperty("attributeValues")?t.attributeValues.valueType:""}function qr(t,e,r,n,a){return Wr.apply(this,arguments)}function Wr(){return(Wr=Object(u.a)(c.a.mark((function t(e,r,n,a,i){var o,s,u,l,f,d,p,h,_;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=i&&null!==(o=i.i3s)&&void 0!==o&&o.colorsByAttribute){t.next=2;break}return t.abrupt("return",e);case 2:if((s=a.fields.find((function(t){var e,r;return t.name===(null==i||null===(e=i.i3s)||void 0===e||null===(r=e.colorsByAttribute)||void 0===r?void 0:r.attributeName)})))&&["esriFieldTypeDouble","esriFieldTypeInteger","esriFieldTypeSmallInteger"].includes(s.type)){t.next=5;break}return t.abrupt("return",e);case 5:return t.next=7,Jr(s.name,n,a,i);case 7:if(u=t.sent){t.next=10;break}return t.abrupt("return",e);case 10:if(l=a.fields.find((function(t){return"esriFieldTypeOID"===t.type}))){t.next=13;break}return t.abrupt("return",e);case 13:return t.next=15,Jr(l.name,n,a,i);case 15:if(f=t.sent){t.next=18;break}return t.abrupt("return",e);case 18:for(d={},p=0;p<f[l.name].length;p++)d[f[l.name][p]]=Qr(u[s.name][p],i);h=0;case 21:if(!(h<r.value.length)){t.next=29;break}if(_=d[r.value[h]]){t.next=25;break}return t.abrupt("continue",26);case 25:e.value.set(_,4*h);case 26:h++,t.next=21;break;case 29:return t.abrupt("return",e);case 30:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Qr(t,e){var r;if(null==e||null===(r=e.i3s)||void 0===r||!r.colorsByAttribute)return[255,255,255,255];for(var n=e.i3s.colorsByAttribute,a=n.minValue,i=n.maxValue,o=n.minColor,s=n.maxColor,c=(t-a)/(i-a),u=[255,255,255,255],l=0;l<o.length;l++)u[l]=Math.round((s[l]-o[l])*c+o[l]);return u}function Jr(t,e,r,n){return Yr.apply(this,arguments)}function Yr(){return(Yr=Object(u.a)(c.a.mark((function t(e,r,n,a){var i,o,s,u,l,f,d;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=r.attributeUrls,s=n.attributeStorageInfo,-1!==(u=s.findIndex((function(t){var r=t.name;return e===r})))){t.next=5;break}return t.abrupt("return",null);case 5:return l=Dr(o[u],null==a||null===(i=a.i3s)||void 0===i?void 0:i.token),f=Vr(s[u]),t.next=9,Object(I.a)(l,Kr,{attributeName:e,attributeType:f});case 9:return d=t.sent,t.abrupt("return",d);case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Zr(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return $r(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $r(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){s=!0,i=t},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function $r(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function tn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function en(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?tn(Object(r),!0).forEach((function(e){Object(l.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):tn(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var rn=new G.a([0,0,0]);function nn(t){switch(t){case"ktx-etc2":case"dds":return Rr;case"ktx2":return Pr;case"jpg":case"png":default:return L.a}}function an(t,e,r,n,a){return on.apply(this,arguments)}function on(){return(on=Object(u.a)(c.a.mark((function t(e,r,n,a,i){var o,s,u,l,f,d,p,h;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o={attributes:{},indices:null,featureIds:[],vertexCount:0,modelMatrix:new B.a,coordinateSystem:0,byteLength:0,texture:null},!r.textureUrl){t.next=35;break}return u=Dr(r.textureUrl,null==a||null===(s=a.i3s)||void 0===s?void 0:s.token),l=nn(r.textureFormat),t.next=6,fetch(u,null==a?void 0:a.fetch);case 6:return f=t.sent,t.next=9,f.arrayBuffer();case 9:if(d=t.sent,null==a||!a.i3s.decodeTextures){t.next=34;break}if(l!==L.a){t.next=26;break}return p=en(en({},r.textureLoaderOptions),{},{image:{type:"data"}}),t.prev=13,t.next=16,i.parse(d,p);case 16:o.texture=t.sent,t.next=24;break;case 19:return t.prev=19,t.t0=t.catch(13),t.next=23,Object(M.a)(d,l,p);case 23:o.texture=t.sent;case 24:t.next=32;break;case 26:if(l!==Rr&&l!==Pr){t.next=32;break}return t.next=29,Object(I.a)(d,l,r.textureLoaderOptions);case 29:h=t.sent,l===Pr&&(h=h[0]),o.texture={compressed:!0,mipmaps:!1,width:h[0].width,height:h[0].height,data:h};case 32:t.next=35;break;case 34:o.texture=d;case 35:return o.material=yn(r.materialDefinition,o.texture),o.material&&(o.texture=null),t.next=39,sn(e,o,r,n,a);case 39:return t.abrupt("return",t.sent);case 40:case"end":return t.stop()}}),t,null,[[13,19]])})))).apply(this,arguments)}function sn(t,e,r,n,a){return cn.apply(this,arguments)}function cn(){return(cn=Object(u.a)(c.a.mark((function t(e,r,n,a,i){var o,s,u,l,f,d,p,h,_,b,y,S,v,m,E,O,g,R,A,T,w,C,x,P,D,j,I,G,B,k;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=e.byteLength,f=0,d=0,!n.isDracoGeometry){t.next=16;break}return t.next=6,Object(M.a)(e,Zt,{draco:{attributeNameEntry:"i3s-attribute-type"}});case 6:_=t.sent,l=_.header.vertexCount,p=null===(h=_.indices)||void 0===h?void 0:h.value,b=_.attributes,y=b.POSITION,S=b.NORMAL,v=b.COLOR_0,m=b.TEXCOORD_0,E=b["feature-index"],O=b["uv-region"],un(u={position:y,normal:S,color:v,uv0:m,uvRegion:O,id:E},_),(g=En(E))&&mn(u,g),t.next=25;break;case 16:R=a.store.defaultGeometrySchema,A=R.vertexAttributes,T=R.ordering,w=R.featureAttributes,C=R.featureAttributeOrder,x=dn(e,a),f=x.byteOffset,l=x.vertexCount,d=x.featureCount,P=pn(e,f,A,l,T),D=P.attributes,j=P.byteOffset,I=pn(e,j,w,d,C),vn(G=I.attributes),u=ln(D,G);case 25:return null!=i&&null!==(o=i.i3s)&&void 0!==o&&o.coordinateSystem&&i.i3s.coordinateSystem!==kr.METER_OFFSETS?(r.modelMatrix=bn(u.position),r.coordinateSystem=kr.LNGLAT_OFFSETS):(B=_n(u.position,n),r.modelMatrix=B.invert(),r.coordinateSystem=kr.METER_OFFSETS),t.next=28,qr(u.color,u.id,n,a,i);case 28:for(k in u.color=t.sent,r.attributes={positions:u.position,normals:u.normal,colors:fn(u.color),texCoords:u.uv0,uvRegions:fn(u.uvRegion||u.region)},r.indices=p||null,u.id&&u.id.value&&(r.featureIds=u.id.value),r.attributes)r.attributes[k]||delete r.attributes[k];return r.vertexCount=l,r.byteLength=s,t.abrupt("return",r);case 36:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function un(t,e){for(var r in e.loaderData.attributes){var n=e.loaderData.attributes[r];switch(n.name){case"POSITION":t.position.metadata=n.metadata;break;case"feature-index":t.id.metadata=n.metadata}}}function ln(t,e){return en(en({},t),e)}function fn(t){return t?(t.normalized=!0,t):t}function dn(t,e){var r,n=0,a=0,i=0,o=Zr(e.store.defaultGeometrySchema.header);try{for(o.s();!(r=o.n()).done;){var s=r.value,c=s.property,u=s.type,l=Ir(u);switch(c){case Cr.vertexCount:a=new l(t,0,4)[0],n+=Br(u);break;case Cr.featureCount:i=new l(t,4,4)[0],n+=Br(u)}}}catch(f){o.e(f)}finally{o.f()}return{vertexCount:a,featureCount:i,byteOffset:n}}function pn(t,e,r,n,a){var i,o={},s=Zr(a);try{for(s.s();!(i=s.n()).done;){var c=i.value;if(r[c]){var u=r[c],l=u.valueType,f=u.valuesPerElement;if(e+n*f*Br(l)<=t.byteLength){var d=t.slice(e),p=void 0;if("UInt64"===l)p=hn(d,n*f,Br(l));else p=new(Ir(l))(d,0,n*f);switch(o[c]={value:p,type:Gr[l],size:f},c){case"color":o.color.normalized=!0}e+=n*f*Br(l)}else if("uv0"!==c)break}}}catch(h){s.e(h)}finally{s.f()}return{attributes:o,byteOffset:e}}function hn(t,e,r){for(var n=[],a=new DataView(t),i=0,o=0;o<e;o++){var s=a.getUint32(i,!0),c=a.getUint32(i+4,!0),u=s+Math.pow(2,32)*c;n.push(u),i+=r}return new Uint32Array(n)}function _n(t,e){var r=e.mbs,n=t.value,a=t.metadata,i=new B.a,o=new G.a(r[0],r[1],r[2]),s=new G.a;return k.a.WGS84.cartographicToCartesian(o,s),k.a.WGS84.eastNorthUpToFixedFrame(s,i),t.value=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,n=new Float64Array(t.length),a=e["i3s-scale_x"]&&e["i3s-scale_x"].double||1,i=e["i3s-scale_y"]&&e["i3s-scale_y"].double||1,o=0;o<n.length;o+=3)n[o]=t[o]*a+r.x,n[o+1]=t[o+1]*i+r.y,n[o+2]=t[o+2]+r.z;for(var s=0;s<n.length;s+=3)k.a.WGS84.cartographicToCartesian(n.subarray(s,s+3),rn),n[s]=rn.x,n[s+1]=rn.y,n[s+2]=rn.z;return n}(n,a,o),i}function bn(t){var e,r,n=t.metadata,a=(null==n||null===(e=n["i3s-scale_x"])||void 0===e?void 0:e.double)||1,i=(null==n||null===(r=n["i3s-scale_y"])||void 0===r?void 0:r.double)||1,o=new B.a;return o[0]=a,o[5]=i,o}function yn(t,e){var r;return t?r=en(en({},t),{},{pbrMetallicRoughness:t.pbrMetallicRoughness?en({},t.pbrMetallicRoughness):{baseColorFactor:[255,255,255,255]}}):(r={pbrMetallicRoughness:{}},e?r.pbrMetallicRoughness.baseColorTexture={texCoord:0}:r.pbrMetallicRoughness.baseColorFactor=[255,255,255,255]),r.alphaCutoff=r.alphaCutoff||.25,r.alphaMode&&(r.alphaMode=r.alphaMode.toUpperCase()),r.emissiveFactor&&(r.emissiveFactor=Sn(r.emissiveFactor)),r.pbrMetallicRoughness&&r.pbrMetallicRoughness.baseColorFactor&&(r.pbrMetallicRoughness.baseColorFactor=Sn(r.pbrMetallicRoughness.baseColorFactor)),e&&function(t,e){var r={source:{image:e}};t.pbrMetallicRoughness&&t.pbrMetallicRoughness.baseColorTexture?t.pbrMetallicRoughness.baseColorTexture=en(en({},t.pbrMetallicRoughness.baseColorTexture),{},{texture:r}):t.emissiveTexture?t.emissiveTexture=en(en({},t.emissiveTexture),{},{texture:r}):t.pbrMetallicRoughness&&t.pbrMetallicRoughness.metallicRoughnessTexture?t.pbrMetallicRoughness.metallicRoughnessTexture=en(en({},t.pbrMetallicRoughness.metallicRoughnessTexture),{},{texture:r}):t.normalTexture?t.normalTexture=en(en({},t.normalTexture),{},{texture:r}):t.occlusionTexture&&(t.occlusionTexture=en(en({},t.occlusionTexture),{},{texture:r}))}(r,e),r}function Sn(t){for(var e=Object(D.a)(t),r=0;r<t.length;r++)e[r]=t[r]/255;return e}function vn(t){var e=t.id,r=t.faceRange;if(e&&r){for(var n=e.value,a=r.value,i=a[a.length-1]+1,o=new Uint32Array(3*i),s=0,c=0,u=1;u<a.length;u+=2){var l=Number(n[s]),f=c+3*(a[u]-a[u-1]+1);o.fill(l,c,f),s++,c=f}t.id.value=o}}function mn(t,e){for(var r=t.id.value,n=new Float32Array(r.length),a=0;a<r.length;a++)n[a]=e[r[a]];t.id.value=n}function En(t){var e,r;return null==t||null===(e=t.metadata)||void 0===e||null===(r=e["i3s-feature-ids"])||void 0===r?void 0:r.intArray}var On={name:"I3S Content (Indexed Scene Layers)",id:j.b?"i3s-content":"i3s-content-nodejs",module:"i3s",worker:!0,version:"3.3.1",mimeTypes:["application/octet-stream"],parse:function(t,e,r){return gn.apply(this,arguments)},extensions:["bin"],options:{"i3s-content":{}}};function gn(){return(gn=Object(u.a)(c.a.mark((function t(e,r,n){var a,i,o,s,u,l,f;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=(null==r?void 0:r.i3s)||{},i=a.tile,o=a._tileOptions,s=a.tileset,u=a._tilesetOptions,f=u||s,(l=o||i)&&f){t.next=5;break}return t.abrupt("return",null);case 5:return t.next=7,an(e,l,f,r,n);case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var Rn=r("DUak"),An=2,Tn="mesh",wn="I3S";function Cn(t){return xn.apply(this,arguments)}function xn(){return(xn=Object(u.a)(c.a.mark((function t(e){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",JSON.parse((new TextDecoder).decode(e)));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var Pn={name:"I3S Node Page",id:"i3s-node-page",module:"i3s",version:"3.3.1",mimeTypes:["application/json"],parse:function(t){return Dn.apply(this,arguments)},extensions:["json"],options:{}};function Dn(){return(Dn=Object(u.a)(c.a.mark((function t(e){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=Cn(e),t.abrupt("return",e);case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Mn(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return jn(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jn(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){s=!0,i=t},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function jn(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function In(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}var Gn=function(){function t(e,r){var n,a;Object(N.a)(this,t),Object(l.a)(this,"tileset",void 0),Object(l.a)(this,"nodePages",[]),Object(l.a)(this,"pendingNodePages",[]),Object(l.a)(this,"nodesPerPage",void 0),Object(l.a)(this,"options",void 0),Object(l.a)(this,"lodSelectionMetricType",void 0),Object(l.a)(this,"textureDefinitionsSelectedFormats",[]),Object(l.a)(this,"nodesInNodePages",void 0),Object(l.a)(this,"textureLoaderOptions",{}),this.tileset=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?In(Object(r),!0).forEach((function(e){Object(l.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):In(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},e),this.nodesPerPage=(null===(n=e.nodePages)||void 0===n?void 0:n.nodesPerPage)||64,this.lodSelectionMetricType=null===(a=e.nodePages)||void 0===a?void 0:a.lodSelectionMetricType,this.options=r,this.nodesInNodePages=0,this.initSelectedFormatsForTextureDefinitions(e)}var e,r;return Object(X.a)(t,[{key:"getNodeById",value:(r=Object(u.a)(c.a.mark((function t(e){var r,n,a,i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=Math.floor(e/this.nodesPerPage),this.nodePages[r]||this.pendingNodePages[r]){t.next=9;break}return a=Dr("".concat(this.tileset.url,"/nodepages/").concat(r),null===(n=this.options.i3s)||void 0===n?void 0:n.token),this.pendingNodePages[r]={status:"Pending",promise:Object(I.a)(a,Pn,this.options)},t.next=6,this.pendingNodePages[r].promise;case 6:this.nodePages[r]=t.sent,this.nodesInNodePages+=this.nodePages[r].nodes.length,this.pendingNodePages[r].status="Done";case 9:if("Pending"!==this.pendingNodePages[r].status){t.next=13;break}return t.next=12,this.pendingNodePages[r].promise;case 12:this.nodePages[r]=t.sent;case 13:return i=e%this.nodesPerPage,t.abrupt("return",this.nodePages[r].nodes[i]);case 15:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)})},{key:"formTileFromNodePages",value:(e=Object(u.a)(c.a.mark((function t(e){var r,n,a,i,o,s,u,l,f,d,p,h,_,b,y,S,v,m,E,O,g,R,A;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getNodeById(e);case 2:r=t.sent,n=[],a=[],i=Mn(r.children||[]);try{for(i.s();!(o=i.n()).done;)s=o.value,a.push(this.getNodeById(s))}catch(c){i.e(c)}finally{i.f()}return t.next=9,Promise.all(a);case 9:u=t.sent,l=Mn(u);try{for(l.s();!(f=l.n()).done;)d=f.value,n.push({id:d.index.toString(),obb:d.obb})}catch(c){l.e(c)}finally{l.f()}return b="jpg",y=[],S=!1,r&&r.mesh&&(v=r.mesh.geometry&&this.getContentUrl(r.mesh.geometry)||{isDracoGeometry:!1},m=v.url,E=v.isDracoGeometry,p=m,S=E,O=this.getInformationFromMaterial(r.mesh.material),g=O.textureData,R=O.materialDefinition,_=R,b=g.format||b,g.name&&(h="".concat(this.tileset.url,"/nodes/").concat(r.mesh.material.resource,"/textures/").concat(g.name)),this.tileset.attributeStorageInfo&&(y=Mr(this.tileset,r.mesh.attribute.resource))),A=this.getLodSelection(r),t.abrupt("return",Un({id:e.toString(),lodSelection:A,obb:r.obb,contentUrl:p,textureUrl:h,attributeUrls:y,materialDefinition:_,textureFormat:b,textureLoaderOptions:this.textureLoaderOptions,children:n,isDracoGeometry:S}));case 18:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"getContentUrl",value:function(t){var e=null,r=this.tileset.geometryDefinitions[t.definition],n=-1;if(this.options.i3s&&this.options.i3s.useDracoGeometry&&(n=r.geometryBuffers.findIndex((function(t){return t.compressedAttributes&&"draco"===t.compressedAttributes.encoding}))),-1===n&&(n=r.geometryBuffers.findIndex((function(t){return!t.compressedAttributes}))),-1!==n){var a=Boolean(r.geometryBuffers[n].compressedAttributes);e={url:"".concat(this.tileset.url,"/nodes/").concat(t.resource,"/geometries/").concat(n),isDracoGeometry:a}}return e}},{key:"getLodSelection",value:function(t){var e=[];return"maxScreenThresholdSQ"===this.lodSelectionMetricType&&e.push({metricType:"maxScreenThreshold",maxError:Math.sqrt(t.lodThreshold/(.25*Math.PI))}),e.push({metricType:this.lodSelectionMetricType,maxError:t.lodThreshold}),e}},{key:"getInformationFromMaterial",value:function(t){var e={textureData:{name:null}};if(t){var r,n=null===(r=this.tileset.materialDefinitions)||void 0===r?void 0:r[t.definition];if(n){var a,i;e.materialDefinition=n;var o=null==n||null===(a=n.pbrMetallicRoughness)||void 0===a||null===(i=a.baseColorTexture)||void 0===i?void 0:i.textureSetDefinitionId;"number"==typeof o&&(e.textureData=this.textureDefinitionsSelectedFormats[o]||e.textureData)}}return e}},{key:"initSelectedFormatsForTextureDefinitions",value:function(t){this.textureDefinitionsSelectedFormats=[];var e,r=this.getSupportedTextureFormats(),n=Mn(t.textureSetDefinitions||[]);try{for(n.s();!(e=n.n()).done;){var a,i=e.value,o=i&&i.formats||[],s=null,c=Mn(r);try{var u=function(){var t=a.value,e=o.find((function(e){return e.format===t}));if(e)return s=e,"break"};for(c.s();!(a=c.n()).done;){if("break"===u())break}}catch(l){c.e(l)}finally{c.f()}s&&"ktx2"===s.format&&(this.textureLoaderOptions.basis={format:vr(),containerFormat:"ktx2",module:"encoder"}),this.textureDefinitionsSelectedFormats.push(s)}}catch(l){n.e(l)}finally{n.f()}}},{key:"getSupportedTextureFormats",value:function(){var t=[];if(!this.options.i3s||this.options.i3s.useCompressedTextures){var e=lr();e.has("etc2")&&t.push("ktx-etc2"),e.has("dxt")&&t.push("dds"),t.push("ktx2")}return t.push("jpg"),t.push("png"),t}}]),t}();function Bn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function kn(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Bn(Object(r),!0).forEach((function(e){Object(l.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Bn(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ln(t,e){var r,n,a,i=e.url||"";return t.geometryData&&(r="".concat(i,"/").concat(t.geometryData[0].href)),t.textureData&&(n="".concat(i,"/").concat(t.textureData[0].href)),t.attributeData&&(a=function(t,e){for(var r=e.attributeData,n=void 0===r?[]:r,a=[],i=0;i<n.length;i++){var o=n[i].href.replace("./","");a.push("".concat(t,"/").concat(o))}return a}(i,t)),Un(kn(kn({},t),{},{url:i,contentUrl:r,textureUrl:n,attributeUrls:a,isDracoGeometry:!1}))}function Un(t){var e,r,n={},a=[0,0,0,1];if(t.mbs)a=t.mbs,n.sphere=[].concat(Object(D.a)(k.a.WGS84.cartographicToCartesian(t.mbs.slice(0,3))),[t.mbs[3]]);else if(t.obb){n.box=[].concat(Object(D.a)(k.a.WGS84.cartographicToCartesian(t.obb.center)),Object(D.a)(t.obb.halfSize),Object(D.a)(t.obb.quaternion));var i=(new Rn.d).fromCenterHalfSizeQuaternion(n.box.slice(0,3),t.obb.halfSize,t.obb.quaternion).getBoundingSphere();n.sphere=[].concat(Object(D.a)(i.center),[i.radius]),a=[].concat(Object(D.a)(t.obb.center),[i.radius])}var o=null===(e=t.lodSelection)||void 0===e?void 0:e[0].metricType,s=null===(r=t.lodSelection)||void 0===r?void 0:r[0].maxError,c=t.transform,u=Tn,l=An;return kn(kn({},t),{},{mbs:a,boundingVolume:n,lodMetricType:o,lodMetricValue:s,transformMatrix:c,type:u,refine:l})}function Fn(t,e,r){return Hn.apply(this,arguments)}function Hn(){return(Hn=Object(u.a)(c.a.mark((function t(e,r,n){var a,i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.url=n.url,!e.nodePages){t.next=6;break}e.nodePagesTile=new Gn(e,r),e.root=e.nodePagesTile.formTileFromNodePages(0),t.next=10;break;case 6:return i=Dr("".concat(e.url,"/nodes/root"),null===(a=r.i3s)||void 0===a?void 0:a.token),t.next=9,Object(I.a)(i,e.loader,kn(kn({},r),{},{i3s:kn(kn({},r.i3s),{},{loadContent:!1,isTileHeader:!0,isTileset:!1})}));case 9:e.root=t.sent;case 10:e.basePath=e.url,e.type=wn,e.lodMetricType=e.root.lodMetricType,e.lodMetricValue=e.root.lodMetricValue;case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var Nn=/layers\/[0-9]+$/,Xn=/nodes\/([0-9-]+|root)$/,Kn={name:"I3S (Indexed Scene Layers)",id:"i3s",module:"i3s",version:"3.3.1",mimeTypes:["application/octet-stream"],parse:function(t){return zn.apply(this,arguments)},extensions:["bin"],options:{i3s:{token:null,isTileset:"auto",isTileHeader:"auto",tile:null,tileset:null,_tileOptions:null,_tilesetOptions:null,useDracoGeometry:!0,useCompressedTextures:!0,decodeTextures:!0,coordinateSystem:kr.METER_OFFSETS,colorsByAttribute:null}}};function zn(){return(zn=Object(u.a)(c.a.mark((function t(e){var r,n,a,i,o,s=arguments;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=s.length>1&&void 0!==s[1]?s[1]:{},n=s.length>2?s[2]:void 0,a=n.url,r.i3s=r.i3s||{},"504b0304"!==Zn(e)){t.next=7;break}throw new Error("Files with .slpk extention currently are not supported by I3SLoader");case 7:if(i="auto"===r.i3s.isTileset?Nn.test(a):r.i3s.isTileset,o="auto"===r.isTileHeader?Xn.test(a):r.i3s.isTileHeader,!i){t.next=15;break}return t.next=12,Wn(e,r,n);case 12:e=t.sent,t.next=24;break;case 15:if(!o){t.next=21;break}return t.next=18,Jn(e,n);case 18:e=t.sent,t.next=24;break;case 21:return t.next=23,Vn(e,r);case 23:e=t.sent;case 24:return t.abrupt("return",e);case 25:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Vn(t,e){return qn.apply(this,arguments)}function qn(){return(qn=Object(u.a)(c.a.mark((function t(e,r){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(M.a)(e,On,r);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Wn(t,e,r){return Qn.apply(this,arguments)}function Qn(){return(Qn=Object(u.a)(c.a.mark((function t(e,r,n){var a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("PointCloud"!==(null==(a=JSON.parse((new TextDecoder).decode(e)))?void 0:a.layerType)){t.next=3;break}throw new Error("Point Cloud layers currently are not supported by I3SLoader");case 3:return a.loader=Kn,t.next=6,Fn(a,r,n);case 6:return t.abrupt("return",a);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Jn(t,e){return Yn.apply(this,arguments)}function Yn(){return(Yn=Object(u.a)(c.a.mark((function t(e,r){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=JSON.parse((new TextDecoder).decode(e)),t.abrupt("return",Ln(e,r));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Zn(t){return t instanceof ArrayBuffer?Object(D.a)(new Uint8Array(t,0,4)).map((function(t){return t.toString(16).padStart(2,"0")})).join(""):null}var $n="https://tiles.arcgis.com/tiles/z2tnIkrLQ2BRzr6P/arcgis/rest/services/SanFrancisco_Bldgs/SceneServer/layers/0";function ta(){return(ta=Object(u.a)(c.a.mark((function t(e){var r,n,a,i,o,s,u,l;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T(["esri/Map","esri/views/SceneView","esri/views/3d/externalRenderers"]);case 2:return r=t.sent,n=r.DeckRenderer,a=r.modules,i=a[0],o=a[1],s=a[2],u=new o({container:e,qualityProfile:"high",map:new i({basemap:"dark-gray-vector"}),environment:{atmosphereEnabled:!1},camera:{position:{x:-122.4,y:37.78,z:3e3},heading:0,tilt:25},viewingMode:"local"}),l=new n(u,{}),s.add(u,l),u.on("layerview-create",(function(){l.deck.layers=[new P.a({id:"tile-3d-layer",data:$n,loader:Kn})]})),t.abrupt("return",{remove:function(){u.destroy(),l.dispose()}});case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var ea=r("CtqP"),ra=function(t){function e(){for(var e,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))||this)._containerRef=Object(a.createRef)(),e}Object(n.a)(e,t),e.renderInfo=function(t){return i.a.createElement("div",null,i.a.createElement("p",null,"Highly detailed LoD2 textured 3D buildings for downtown San Francisco in I3S format, visualized with deck.gl's Tile3DLayer. This data is provided by ",i.a.createElement("a",{href:"https://www.precisionlightworks.com/"},"Precision Light Works (PLW)"),"."),i.a.createElement("div",null,i.a.createElement("img",{src:"http://downloads.esri.com/blogs/arcgisonline/esrilogo_new.png",alt:"ESRI logo"}),i.a.createElement("a",{href:"https://www.arcgis.com/home/item.html?id=d3344ba99c3f4efaa909ccfbcc052ed5"},"Data profile page")))};var r=e.prototype;return r.componentDidMount=function(){var t=this,e=document.createElement("link");e.setAttribute("rel","stylesheet"),e.setAttribute("href","https://js.arcgis.com/4.16/esri/themes/light/main.css"),document.head.appendChild(e),function(t){return ta.apply(this,arguments)}(this._containerRef.current).then((function(e){return t._view=e}))},r.componentWillUnmount=function(){this._view&&this._view.remove()},r.render=function(){return i.a.createElement("div",{ref:this._containerRef,style:{width:"100%",height:"100%"}})},e}(a.Component);ra.title="San Francisco 3D Buildings",ra.code=o.b+"/examples/website/i3s";e.default=Object(ea.a)(ra)},iJYz:function(t,e,r){!function(t){"use strict";var e={Promise:"undefined"!=typeof window?window.Promise:void 0};function r(t){if("next"===t.toLowerCase())return"next";var e=t&&t.match(/^(\d)\.(\d+)/);return e&&{major:parseInt(e[1],10),minor:parseInt(e[2],10)}}function n(t){return void 0===t&&(t="4.21"),"https://js.arcgis.com/"+t+"/"}function a(t){return!t||r(t)?function(t){void 0===t&&(t="4.21");var e=n(t),a=r(t);return"next"!==a&&3===a.major?e+(a.minor<=10?"js/":"")+"esri/css/esri.css":e+"esri/themes/light/main.css"}(t):t}function i(t,e){var r=a(t),n=function(t){return document.querySelector('link[href*="'+t+'"]')}(r);return n||function(t,e){if(e){var r=document.querySelector(e);r.parentNode.insertBefore(t,r)}else document.head.appendChild(t)}(n=function(t){var e=document.createElement("link");return e.rel="stylesheet",e.href=t,e}(r),e),n}var o={};function s(t,e,r){var n;r&&(n=function(t,e){var r=function r(n){e(n.error||new Error("There was an error attempting to load "+t.src)),t.removeEventListener("error",r,!1)};return t.addEventListener("error",r,!1),r}(t,r)),t.addEventListener("load",(function r(){e(t),t.removeEventListener("load",r,!1),n&&t.removeEventListener("error",n,!1)}),!1)}function c(){return document.querySelector("script[data-esri-loader]")}function u(){var t=window.require;return t&&t.on}function l(t){void 0===t&&(t={});var r={};[o,t].forEach((function(t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(r[e]=t[e])}));var a=r.version,l=r.url||n(a);return new e.Promise((function(t,e){var n=c();if(n){var o=n.getAttribute("src");o!==l?e(new Error("The ArcGIS API for JavaScript is already loaded ("+o+").")):u()?t(n):s(n,t,e)}else if(u())e(new Error("The ArcGIS API for JavaScript is already loaded."));else{var f=r.css;f&&i(!0===f?a:f,r.insertCssBefore),s(n=function(t){var e=document.createElement("script");return e.type="text/javascript",e.src=t,e.setAttribute("data-esri-loader","loading"),e}(l),(function(){n.setAttribute("data-esri-loader","loaded"),t(n)}),e),document.body.appendChild(n)}}))}function f(t){return new e.Promise((function(e,r){var n=window.require.on("error",r);window.require(t,(function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];n.remove(),e(t)}))}))}t.utils=e,t.loadModules=function(t,e){if(void 0===e&&(e={}),u())return f(t);var r=c(),n=r&&r.getAttribute("src");return!e.url&&n&&(e.url=n),l(e).then((function(){return f(t)}))},t.getScript=c,t.isLoaded=u,t.loadScript=l,t.setDefaultOptions=function(t){void 0===t&&(t={}),o=t},t.loadCss=i,Object.defineProperty(t,"__esModule",{value:!0})}(e)}}]);